var cashPopup=document.querySelector(".modal-cash");var buyList=document.querySelectorAll("a.buy");var cashCheckout=cashPopup.querySelector(".checkout");var cashClose=cashPopup.querySelector(".modal-close");var onModalClose=function(a){a.preventDefault();document.querySelector(".modal-show").classList.remove("modal-show");window.removeEventListener("keydown",onEscapePress)};var onEscapePress=function(a){if(a.keyCode===27){onModalClose(a)}};cashClose.addEventListener("click",onModalClose);cashCheckout.addEventListener("click",onModalClose);for(var i=0;i<buyList.length;i++){buyList[i].addEventListener("click",function(a){a.preventDefault();cashPopup.classList.add("modal-show");window.addEventListener("keydown",onEscapePress)})}var enrtyRoom=document.querySelector(".authorization");var buttonEntry=enrtyRoom.querySelector(".button-entry");var closeRoom=enrtyRoom.querySelector(".exit");var onEntryPress=function(a){a.preventDefault();enrtyRoom.classList.toggle("room")};buttonEntry.addEventListener("click",onEntryPress);closeRoom.addEventListener("click",onEntryPress);if(document.querySelector("#modal-feedback")){var link=document.querySelector(".button-modal");var modalFeedback=document.querySelector("#modal-feedback");var close=modalFeedback.querySelector(".modal-close");var feedbackForm=modalFeedback.querySelector(".feedback-form");var fullname=modalFeedback.querySelector("[name=fullname]");var email=modalFeedback.querySelector("[name=email]");var isStorageSupport=true;var storage="";try{storage=localStorage.getItem("fullname")}catch(err){isStorageSupport=false}link.addEventListener("click",function(a){a.preventDefault();modalFeedback.classList.add("modal-show");window.addEventListener("keydown",onEscapePress);if(storage){fullname.value=storage;email.focus()}else{fullname.focus()}});close.addEventListener("click",function(a){a.preventDefault();modalFeedback.classList.remove("modal-show");modalFeedback.classList.remove("modal-error")});feedbackForm.addEventListener("submit",function(a){if(!fullname.value||!email.value){a.preventDefault();modalFeedback.classList.remove("modal-error");modalFeedback.offsetWidth=modalFeedback.offsetWidth;modalFeedback.classList.add("modal-error")}else{if(isStorageSupport){localStorage.setItem("fullname",fullname.value)}}})}if(document.querySelector(".modal-map-button")){var mapLink=document.querySelector(".modal-map-button");var mapPopup=document.querySelector(".modal-map");var mapClose=mapPopup.querySelector(".modal-close");mapLink.addEventListener("click",function(a){a.preventDefault();mapPopup.classList.add("modal-show");window.addEventListener("keydown",onEscapePress)});mapClose.addEventListener("click",onModalClose);function initMap(){var c={lat:59.938794,lng:30.323083};var b=new google.maps.Map(document.querySelector("#map-container"),{center:c,disableDefaultUI:true,zoom:16});var a=new google.maps.Marker({map:b,position:c,})}}if(document.querySelector("#filter-form")){var range={min:0,max:37000,step:100};var filterForm=document.querySelector("#filter-form");var rangeOutput=document.querySelectorAll(".range-output");var rangeBar=document.querySelector(".range-bar");var leverMin=document.querySelector(".range-lever-min");var leverMax=document.querySelector(".range-lever-max");var scaleLength=document.querySelector(".range-scale").offsetWidth;filterForm.price[0].step=range.step;filterForm.price[0].step=range.step;filterForm.price[1].max=range.max;var onValuesGetting=function(){var c=filterForm.price[0].value;var a=filterForm.price[1].value;var d=100*c/range.max+"%";var b=100*a/range.max+"%";rangeOutput[0].innerHTML=c;rangeOutput[1].innerHTML=a;filterForm.price[0].max=a;filterForm.price[1].min=c;rangeBar.style.left=d;rangeBar.style.right="calc(100% - "+b+")";leverMin.style.left="calc("+d+" - "+leverMin.offsetWidth/2+"px)";leverMax.style.left="calc("+b+" - "+leverMax.offsetWidth/2+"px)"};var onLeverGrabbing=function(a){a.preventDefault();var g=a.type==="touchstart";var h=g?"touchmove":"mousemove";var e=g?"touchend":"mouseup";var d=a.target===leverMin?filterForm.price[0]:filterForm.price[1];var c=g?a.changedTouches[0].pageX:a.pageX;var l=c;var k=parseInt(d.value,10);var f=function(){return Math.round((l-c)*range.max/(range.step*scaleLength))*range.step+k};var b=function(m){l=g?m.changedTouches[0].pageX:m.pageX;d.value=f();onValuesGetting()};var j=function(m){m.preventDefault();document.removeEventListener(h,b);document.removeEventListener(e,j)};document.addEventListener(h,b);document.addEventListener(e,j)};filterForm.addEventListener("change",onValuesGetting);leverMin.addEventListener("mousedown",onLeverGrabbing);leverMax.addEventListener("mousedown",onLeverGrabbing);leverMin.addEventListener("touchstart",onLeverGrabbing);leverMax.addEventListener("touchstart",onLeverGrabbing);onValuesGetting()};
